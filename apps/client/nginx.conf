server {
  listen 1420;
  server_name localhost;

  root /usr/share/nginx/html;
  index index.html;

  # Gzip compression
  gzip on;
  gzip_vary on;
  gzip_min_length 1024;
  gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/javascript application/json;

  # Настройка кэширования для статики (JS, CSS, шрифты и картинки внутри assets)
  location /assets/ {
      # Кэшировать на 1 год
      expires 1y;
      # Добавляем заголовки:
      # public - кэшировать могут все (браузеры, CDN)
      # immutable - файл никогда не меняется (т.к. у него хэш в имени), браузеру не нужно проверять обновления
      add_header Cache-Control "public, max-age=31536000, immutable";
      
      # Отключаем логирование доступа к статике, чтобы не забивать логи (опционально)
      access_log off;
      
      # Если файл не найден — 404, а не index.html (важно для правильной отладки)
      try_files $uri =404;
  }

  # Эта директива важна для корректной работы роутинга в SPA
  location / {
      add_header Cache-Control "no-store, no-cache, must-revalidate";
      try_files $uri $uri/ /index.html;
  }
}
